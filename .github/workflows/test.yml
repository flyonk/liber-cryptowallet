name: tests
on:
  push:
    branches:
      - 'feature/#387yn1r'

jobs:
  call-workflow:
    runs-on: self-hosted
    steps:
      - name: autotests
      - uses: actions/github-script@v6
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            await github.rest.actions.createWorkflowDispatch({
              owner: 'cryptowize-tech',
              repo: 'liber-app-autotests',
              workflow_id: 'autotest.yml',
              ref: 'main'
            })
#        run: |
#          curl \
#          -X POST \
#          -H "Accept: application/vnd.github+json" \
#          -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
#          https://api.github.com/repos/OWNER/REPO/actions/workflows/WORKFLOW_ID/dispatches \
#          -d '{"ref":"main","inputs":{"baseApiUrl":"https://api.dev.liber.casa/"}}'